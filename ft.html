<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Featured Recipes</title>
  <link rel="stylesheet" href="style.css">
  <style>
    main {
      width: 100%;
      padding: 20px;
      box-sizing: border-box;
    }

    section {
      margin-bottom: 50px;
    }

    section h2 {
      text-align: center;
      margin-bottom: 15px;
      color: #ff6f61;
    }

    .carousel-container {
      position: relative;
      background: #ffe5d4; /* peachy bg */
      padding: 20px;
      border-radius: 15px;
      overflow: hidden;
    }

    .carousel {
      display: flex;
      gap: 20px;
      overflow-x: auto;
      scroll-behavior: smooth;
    }

    .carousel::-webkit-scrollbar {
      display: none; /* hide scrollbar */
    }

    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #ff6f61;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 10px 15px;
      border-radius: 50%;
      z-index: 10;
      transition: 0.3s;
    }

    .carousel-btn:hover {
      background: #ff3b2f;
    }

    .carousel-btn.left {
      left: 10px;
    }

    .carousel-btn.right {
      right: 10px;
    }

    .recipe-card {
      min-width: 250px;
      flex-shrink: 0;
    }

    body.dark section h2 {
      color: #ffd700;
    }

    body.dark .carousel-container {
      background: #222;
    }

    body.dark .carousel-btn {
      background: #ffd700;
      color: #000;
    }

    body.dark .carousel-btn:hover {
      background: #ffb703;
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div id="sidebar" class="sidebar">
    <a href="index.html">Home</a>
    <a href="featured.html">Featured Recipes</a>
    <a href="devs.html">Devs</a>
    <a href="recipes.html">Search Recipes</a>
  </div>

  <!-- Navbar -->
  <div class="navbar">
    <span id="hamburger" onclick="toggleSidebar()">‚ò∞</span>
    <h1>Featured Recipes</h1>
    <button id="dark-mode-toggle">üåô</button>
  </div>

  <main>
    <section>
      <h2>üåæ Gluten Free Recipes</h2>
      <div class="carousel-container">
        <button class="carousel-btn left" onclick="scrollCarousel('gluten-free', -1)">‚Äπ</button>
        <div id="gluten-free" class="carousel"></div>
        <button class="carousel-btn right" onclick="scrollCarousel('gluten-free', 1)">‚Ä∫</button>
      </div>
    </section>

    <section>
      <h2>ü•ú Nut Free Recipes</h2>
      <div class="carousel-container">
        <button class="carousel-btn left" onclick="scrollCarousel('nut-free', -1)">‚Äπ</button>
        <div id="nut-free" class="carousel"></div>
        <button class="carousel-btn right" onclick="scrollCarousel('nut-free', 1)">‚Ä∫</button>
      </div>
    </section>

    <section>
      <h2>üå± Vegan Recipes</h2>
      <div class="carousel-container">
        <button class="carousel-btn left" onclick="scrollCarousel('vegan', -1)">‚Äπ</button>
        <div id="vegan" class="carousel"></div>
        <button class="carousel-btn right" onclick="scrollCarousel('vegan', 1)">‚Ä∫</button>
      </div>
    </section>
  </main>

  <script>
    const apiKey = "2c5260fbaaab48548f813524144c9082";

    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const hamburger = document.getElementById("hamburger");
      sidebar.classList.toggle("open");
      hamburger.classList.toggle("active");
    }

    // Dark mode persistence
    const darkModeToggle = document.getElementById("dark-mode-toggle");
    window.addEventListener("DOMContentLoaded", () => {
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") {
        document.body.classList.add("dark");
        darkModeToggle.textContent = "‚òÄÔ∏è";
      } else {
        document.body.classList.remove("dark");
        darkModeToggle.textContent = "üåô";
      }
    });
    darkModeToggle.addEventListener("click", () => {
      document.body.classList.toggle("dark");
      const isDark = document.body.classList.contains("dark");
      darkModeToggle.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
      localStorage.setItem("theme", isDark ? "dark" : "light");
    });

    // Fetch recipes
    async function fetchFeaturedRecipes(type, params, targetId) {
      const target = document.getElementById(targetId);
      target.innerHTML = "<p>Loading...</p>";

      try {
        const response = await fetch(
          `https://api.spoonacular.com/recipes/complexSearch?number=6&${params}&apiKey=${apiKey}`
        );
        const data = await response.json();

        if (!response.ok || !data.results || data.results.length === 0) {
          target.innerHTML = `<p>No ${type} recipes found.</p>`;
          return;
        }

        target.innerHTML = data.results.map(recipe => `
          <div class="recipe-card">
            <img src="${recipe.image}" alt="${recipe.title}">
            <div class="recipe-content">
              <h3>${recipe.title}</h3>
              <a href="https://spoonacular.com/recipes/${recipe.title.replace(/ /g, "-")}-${recipe.id}" 
                 target="_blank" 
                 class="view-recipe-btn">View Recipe</a>
            </div>
          </div>
        `).join("");
      } catch {
        target.innerHTML = `<p>Error loading ${type} recipes.</p>`;
      }
    }

    // Carousel scroll
    function scrollCarousel(id, direction) {
      const carousel = document.getElementById(id);
      const scrollAmount = 300;
      carousel.scrollBy({ left: direction * scrollAmount, behavior: "smooth" });
    }

    // Load featured recipes
    fetchFeaturedRecipes("Gluten Free", "diet=gluten free", "gluten-free");
    fetchFeaturedRecipes("Nut Free", "intolerances=peanut,tree nut", "nut-free");
    fetchFeaturedRecipes("Vegan", "diet=vegan", "vegan");
  </script>
</body>
</html>
